{"remainingRequest":"/Users/joey/Projects/qwinto/client/node_modules/thread-loader/dist/cjs.js!/Users/joey/Projects/qwinto/client/node_modules/babel-loader/lib/index.js!/Users/joey/Projects/qwinto/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/joey/Projects/qwinto/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/joey/Projects/qwinto/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/joey/Projects/qwinto/client/src/App.vue?vue&type=template&id=11463af2&bindings={\"error\":\"data\",\"userLeft\":\"data\",\"totalScores\":\"data\",\"dices\":\"data\",\"checkedColors\":\"data\",\"checkActivePlayer\":\"options\",\"gameOver\":\"options\",\"activePlayer\":\"options\",\"errorType\":\"options\",\"botOwnTurn\":\"options\",\"botOthersTurn\":\"options\",\"startGame\":\"options\",\"passDiceColors\":\"options\",\"calcScores\":\"options\",\"calcBonus\":\"options\",\"handleError\":\"options\",\"simulateTurn\":\"options\",\"addBotScore\":\"options\",\"pushScore\":\"options\",\"originalPosition\":\"options\",\"shuffle\":\"options\"}","dependencies":[{"path":"/Users/joey/Projects/qwinto/client/src/App.vue","mtime":1668154010653},{"path":"/Users/joey/Projects/qwinto/client/node_modules/cache-loader/dist/cjs.js","mtime":1668178923236},{"path":"/Users/joey/Projects/qwinto/client/node_modules/thread-loader/dist/cjs.js","mtime":1668178923172},{"path":"/Users/joey/Projects/qwinto/client/node_modules/babel-loader/lib/index.js","mtime":1668178923523},{"path":"/Users/joey/Projects/qwinto/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1668178927054},{"path":"/Users/joey/Projects/qwinto/client/node_modules/cache-loader/dist/cjs.js","mtime":1668178923236},{"path":"/Users/joey/Projects/qwinto/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1668178926998}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUgfSBmcm9tICJ2dWUiOwoKdmFyIF9ob2lzdGVkXzEgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgiT0siKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfdGhlX2hlYWRlciA9IF9yZXNvbHZlQ29tcG9uZW50KCJ0aGUtaGVhZGVyIik7CgogIHZhciBfY29tcG9uZW50X3N0YXJ0X2Zvcm0gPSBfcmVzb2x2ZUNvbXBvbmVudCgic3RhcnQtZm9ybSIpOwoKICB2YXIgX2NvbXBvbmVudF9hdmFpbGFibGVfYWN0aW9ucyA9IF9yZXNvbHZlQ29tcG9uZW50KCJhdmFpbGFibGUtYWN0aW9ucyIpOwoKICB2YXIgX2NvbXBvbmVudF9jb250cm9sX3BhbmVsID0gX3Jlc29sdmVDb21wb25lbnQoImNvbnRyb2wtcGFuZWwiKTsKCiAgdmFyIF9jb21wb25lbnRfc2NvcmVfY2FyZCA9IF9yZXNvbHZlQ29tcG9uZW50KCJzY29yZS1jYXJkIik7CgogIHZhciBfY29tcG9uZW50X3RvdGFsX3Jlc3VsdHMgPSBfcmVzb2x2ZUNvbXBvbmVudCgidG90YWwtcmVzdWx0cyIpOwoKICB2YXIgX2NvbXBvbmVudF9iYXNlX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJiYXNlLWJ1dHRvbiIpOwoKICB2YXIgX2NvbXBvbmVudF9iYXNlX2RpYWxvZyA9IF9yZXNvbHZlQ29tcG9uZW50KCJiYXNlLWRpYWxvZyIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2N0eC5udW1QbGF5ZXJzID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfdGhlX2hlYWRlciwgewogICAga2V5OiAwCiAgfSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSksIF9jdHgubnVtUGxheWVycyA9PT0gMCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X3N0YXJ0X2Zvcm0sIHsKICAgIGtleTogMSwKICAgICJvblN0YXJ0LWdhbWUiOiAkb3B0aW9ucy5zdGFydEdhbWUKICB9LCBudWxsLCA4LCBbIm9uU3RhcnQtZ2FtZSJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKSwgKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KF9jdHguZ2FtZURhdGEsIGZ1bmN0aW9uIChwbGF5ZXIsIGkpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X3Njb3JlX2NhcmQsIHsKICAgICAga2V5OiBpLAogICAgICBwbGF5ZXI6IGksCiAgICAgICJnYW1lLW92ZXIiOiAkb3B0aW9ucy5nYW1lT3ZlciwKICAgICAgcmVmOiAiY2FyZCIKICAgIH0sIHsKICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBbJG9wdGlvbnMuY2hlY2tBY3RpdmVQbGF5ZXIgJiYgISRvcHRpb25zLmdhbWVPdmVyID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfYXZhaWxhYmxlX2FjdGlvbnMsIHsKICAgICAgICAgIGtleTogMCwKICAgICAgICAgICJjaGVja2VkLWNvbG9ycyI6ICRkYXRhLmNoZWNrZWRDb2xvcnMKICAgICAgICB9LCBudWxsLCA4LCBbImNoZWNrZWQtY29sb3JzIl0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpXTsKICAgICAgfSksCiAgICAgIGNvbnRyb2w6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gWyRvcHRpb25zLmNoZWNrQWN0aXZlUGxheWVyICYmICEkb3B0aW9ucy5nYW1lT3ZlciA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2NvbnRyb2xfcGFuZWwsIHsKICAgICAgICAgIGtleTogMCwKICAgICAgICAgICJvbkRpY2VzLWNoYW5nZSI6ICRvcHRpb25zLnBhc3NEaWNlQ29sb3JzLAogICAgICAgICAgcmVmOiAiY29udHJvbERpY2VzIgogICAgICAgIH0sIG51bGwsIDgsIFsib25EaWNlcy1jaGFuZ2UiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldOwogICAgICB9KSwKICAgICAgXzogMgogICAgfSwgMTAzMiwgWyJwbGF5ZXIiLCAiZ2FtZS1vdmVyIl0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpLCAkb3B0aW9ucy5nYW1lT3ZlciA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X3RvdGFsX3Jlc3VsdHMsIHsKICAgIGtleTogMiwKICAgICJ0b3RhbC1zY29yZXMiOiAkZGF0YS50b3RhbFNjb3JlcwogIH0sIG51bGwsIDgsIFsidG90YWwtc2NvcmVzIl0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9iYXNlX2RpYWxvZywgewogICAgc2hvdzogISEkZGF0YS5lcnJvciwKICAgIHR5cGU6ICRvcHRpb25zLmVycm9yVHlwZSwKICAgIHRpdGxlOiBfY3R4LiR0KCdnYW1lLm5vdGlmaWNhdGlvbicpLAogICAgb25DbG9zZTogJG9wdGlvbnMuaGFuZGxlRXJyb3IKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKCJwIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZygkZGF0YS5lcnJvciksIDEpXTsKICAgIH0pLAogICAgYWN0aW9uczogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2Jhc2VfYnV0dG9uLCB7CiAgICAgICAgb25DbGljazogJG9wdGlvbnMuaGFuZGxlRXJyb3IKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2hvaXN0ZWRfMV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICB9LCA4LCBbIm9uQ2xpY2siXSldOwogICAgfSksCiAgICBfOiAxCiAgfSwgOCwgWyJzaG93IiwgInR5cGUiLCAidGl0bGUiLCAib25DbG9zZSJdKV0sIDY0CiAgLyogU1RBQkxFX0ZSQUdNRU5UICovCiAgKTsKfQ=="},{"version":3,"sources":["/Users/joey/Projects/qwinto/client/src/App.vue"],"names":[],"mappings":";;+CA0BwC,I;;;;;;;;;;;;;;;;;;;sDAzBpB,IAAA,CAAA,U,kBAAlB,YAAA,CAA2C,qBAA3C,EAA2C;AAAA,IAAA,GAAA,EAAA;AAAA,GAA3C,C,mCACkB,IAAA,CAAA,UAAA,KAAU,C,kBAA5B,YAAA,CAAyE,qBAAzE,EAAyE;UAAA;AAApC,oBAAY,QAAA,CAAA;AAAwB,GAAzE,E,IAAA,E,CAAA,E,gBAAA,C,sDACA,YAAA,CAgBa,SAhBb,EAgBa,IAhBb,EAgBa,WAAA,CAfW,IAAA,CAAA,QAeX,EAfmB,UAAtB,MAAsB,EAAd,CAAc,EAAb;yBADnB,YAAA,CAgBa,qBAhBb,EAgBa;AAdV,MAAA,GAAG,EAAE,CAcK;AAbV,MAAA,MAAM,EAAE,CAaE;AAZV,mBAAW,QAAA,CAAA,QAYD;AAXX,MAAA,GAAG,EAAC;AAWO,KAhBb,E;AAMa,MAAA,OAAO,EAAA,QAAA,CAChB;AAAA,eAA6G,CAApD,QAAA,CAAA,iBAAA,IAAiB,CAAK,QAAA,CAAA,Q,kBAA/E,YAAA,CAA6G,4BAA7G,EAA6G;gBAAA;AAAzF,4BAAgB,KAAA,CAAA;AAAyE,SAA7G,E,IAAA,E,CAAA,E,kBAAA,C,iCAA6G,CAA7G;AAAA,OADgB,C;AAGP,MAAA,OAAO,EAAA,QAAA,CAChB;AAAA,eAIgB,CAFR,QAAA,CAAA,iBAAA,IAAiB,CAAK,QAAA,CAAA,Q,kBAF9B,YAAA,CAIgB,wBAJhB,EAIgB;gBAAA;AAHb,4BAAc,QAAA,CAAA,cAGD;AADd,UAAA,GAAG,EAAC;AACU,SAJhB,E,IAAA,E,CAAA,E,kBAAA,C,iCAIgB,CAJhB;AAAA,OADgB,C;;KATpB,E,IAAA,E,uBAAA,C;GAgBa,CAhBb,E;;AAAA,G,GAiBqB,QAAA,CAAA,Q,kBAArB,YAAA,CAA2E,wBAA3E,EAA2E;UAAA;AAA3C,oBAAc,KAAA,CAAA;AAA6B,GAA3E,E,IAAA,E,CAAA,E,gBAAA,C,mCACA,YAAA,CAOc,sBAPd,EAOc;AAPA,IAAA,IAAI,EAAA,CAAA,CAAI,KAAA,CAAA,KAOR;AAPgB,IAAA,IAAI,EAAE,QAAA,CAAA,SAOtB;AAPkC,IAAA,KAAK,EAAE,IAAA,CAAA,EAAA,CAAE,mBAAF,CAOzC;AAPmE,IAAA,OAAK,EAAE,QAAA,CAAA;AAO1E,GAPd,E;AACa,IAAA,OAAO,EAAA,QAAA,CAChB;AAAA,aAAkB,CAAlB,YAAA,CAAkB,GAAlB,EAAkB,IAAlB,EAAkB,gBAAA,CAAZ,KAAA,CAAA,KAAY,CAAlB,EAAW,CAAX,CAAkB,CAAlB;AAAA,KADgB,C;AAGP,IAAA,OAAO,EAAA,QAAA,CAChB;AAAA,aAAkD,CAAlD,YAAA,CAAkD,sBAAlD,EAAkD;AAApC,QAAA,OAAK,EAAE,QAAA,CAAA;AAA6B,OAAlD,EAAgC;0BAAE;AAAA,iBAAE,C,UAAA,CAAF;AAAA,S,CAAF;;AAAA,OAAhC,E,CAAA,E,WAAA,CAAkD,CAAlD;AAAA,KADgB,C;;GAJpB,E,CAAA,E,oCAAA,C","sourcesContent":["<template>\n  <the-header v-if=\"numPlayers\"></the-header>\n  <start-form v-if=\"numPlayers === 0\" @start-game=\"startGame\"></start-form>\n  <score-card\n    v-for=\"(player, i) in gameData\" \n    :key=\"i\" \n    :player=\"i\"\n    :game-over=\"gameOver\"\n    ref=\"card\">\n    <template #default>\n      <available-actions :checked-colors=\"checkedColors\" v-if=\"checkActivePlayer && !gameOver\"></available-actions>\n    </template> \n    <template #control>\n      <control-panel \n        @dices-change=\"passDiceColors\"\n        v-if=\"checkActivePlayer && !gameOver\"\n        ref=\"controlDices\">\n      </control-panel>\n    </template> \n  </score-card>\n  <total-results v-if=\"gameOver\" :total-scores=\"totalScores\"></total-results>\n  <base-dialog :show=\"!!error\" :type=\"errorType\" :title=\"$t('game.notification')\" @close=\"handleError\">\n    <template #default>\n      <p>{{ error }}</p>\n    </template>\n    <template #actions>\n      <base-button @click=\"handleError\">OK</base-button>\n    </template>\n  </base-dialog>\n</template>\n\n<script>\nimport TheHeader from \"./components/TheHeader.vue\";\nimport StartForm from \"./components/StartForm.vue\";\nimport ScoreCard from \"./components/ScoreCard.vue\";\nimport ControlPanel from \"./components/ControlPanel.vue\";\nimport AvailableActions from \"./components/AvailableActions.vue\";\nimport TotalResults from \"./components/TotalResults.vue\";\nimport { mapActions, mapGetters } from 'vuex';\nimport scoreMixin from './mixins/score.js';\n\nexport default {\n  name: \"App\",\n  components: {\n    TheHeader,\n    StartForm,\n    ScoreCard,\n    ControlPanel,\n    AvailableActions,\n    TotalResults\n  },\n  mixins: [scoreMixin],\n  data() {\n    return {\n      error: false,\n      userLeft: null,\n      totalScores: [],\n      dices: null,\n      checkedColors: []\n    };\n  },\n  computed: {\n    ...mapGetters(['gameType', 'gameData', 'roundData', 'gameIsOver', 'numPlayers', 'socket', 'myName']),\n    checkActivePlayer() {\n      return typeof this.roundData.activePlayer !== 'undefined';\n    },\n    gameOver() { \n      let filteredArray;\n      if (this.roundData.scoreAdded) {\n        filteredArray = this.roundData.scoreAdded.filter(n => n);\n      }\n      return this.gameIsOver && filteredArray.length === this.numPlayers;\n    },\n    activePlayer() {\n      return this.roundData.activePlayer;\n    },\n    errorType() {\n      if (this.error === this.$t('game.not-enough')) {\n        return 'error';\n      }\n      return 'confirm';\n    },\n    botOwnTurn() {\n      return this.gameType === 'solo' && this.roundData.activePlayer !== 0 && this.roundData.scoreAdded.length === 0\n    },\n    botOthersTurn() {\n      return this.gameType === 'solo' && this.roundData.activePlayer !== 0 && this.roundData.scoreAdded.length !== 0\n    }\n  },\n  methods: {\n    ...mapActions(\n      ['resetRoundData', 'setRoundData', 'setGameData', 'setGameOver', \n      'nextPlayer', 'removePlayer', 'setTotalScore', 'setId', 'setScore']\n    ),\n    startGame() {\n      this.resetRoundData();\n    },\n    passDiceColors(data) {\n      this.checkedColors = data;\n    },\n    calcScores() {\n      this.gameData.forEach((player) => {\n        this.totalScores.push({ name: player.name, score: player.total[9]} );\n      });\n      this.totalScores = this.totalScores.sort((a, b) => b.score - a.score);\n    },\n    calcBonus(player, fieldNo, bonusField, otherField1, otherField2) {\n      if (\n        this.gameData[player][bonusField][fieldNo] > 0 &&\n        this.gameData[player][otherField1][fieldNo] > 0 &&\n        this.gameData[player][otherField2][fieldNo] > 0\n      ) {\n        return this.gameData[player][bonusField][fieldNo];\n      }\n      return 0;\n    },\n    handleError() {\n      if (this.error === this.$t('game.not-enough')) {\n        location.href = '/';\n      }\n      this.error = false;\n    },\n    simulateTurn() {\n      let bot = this.roundData.activePlayer;\n\n      // create color arrays\n      let colors = {\n        red: [[], [], []],\n        yellow: [[], [], []],\n        purple: [[], [], []]\n      }\n\n      // fill color arrays with current scores\n      let colorNames = ['red', 'yellow', 'purple'];\n      let colorFields = {\n        red: [[2,3], [4,6,7], [8,9,10,11]],\n        yellow: [[1,2], [3,4,5], [7,8,9,10]],\n        purple: [[0,1], [2,3,5], [6,7,8,9]]\n      };\n\n      colorNames.forEach(color => {\n        colors[color][0].push(\n          this.gameData[bot][color][colorFields[color][0][0]],\n          this.gameData[bot][color][colorFields[color][0][1]]\n        );\n        colors[color][1].push(\n          this.gameData[bot][color][colorFields[color][1][0]],\n          this.gameData[bot][color][colorFields[color][1][1]],\n          this.gameData[bot][color][colorFields[color][1][2]]\n        );\n        colors[color][2].push(\n          this.gameData[bot][color][colorFields[color][2][0]],\n          this.gameData[bot][color][colorFields[color][2][1]],\n          this.gameData[bot][color][colorFields[color][2][2]],\n          this.gameData[bot][color][colorFields[color][2][3]]\n        );\n      });\n\n      /* determine how many dices to roll */\n      \n      // join color arrays to check where there is room\n      let zeroArr = colors.red[0].concat(colors.yellow[0], colors.purple[0]);\n      let oneArr = colors.red[1].concat(colors.yellow[1], colors.purple[1]);\n      let twoArr = colors.red[2].concat(colors.yellow[2], colors.purple[2]);\n      console.log('zero: ', zeroArr);\n      console.log('one: ', oneArr);\n      console.log('two: ', twoArr);\n      \n      let numDices;\n      let chance = Math.random();\n      // room in every array\n      if (zeroArr.filter(Boolean).length < 6 && oneArr.filter(Boolean).length < 9 && twoArr.filter(Boolean).length < 12) {\n        if (chance <= 0.2) {\n        numDices = 1;\n        } else if (chance <= 0.55) {\n          numDices = 2;\n        } else {\n          numDices = 3\n        }\n      // room in arr 0 + 1\n      } else if (zeroArr.filter(Boolean).length < 6 && oneArr.filter(Boolean).length < 9) {\n        if (chance <= 0.4) {\n          numDices = 1;\n        } else {\n          numDices = 2;\n        }\n      // room in arr 0 + 2\n      } else if (zeroArr.filter(Boolean).length < 6 && twoArr.filter(Boolean).length < 12) {\n        if (chance <= 0.33) {\n          numDices = 1;\n        } else {\n          numDices = 3;\n        }\n      // room in arr 1 + 2\n      } else if (oneArr.filter(Boolean).length < 9 && twoArr.filter(Boolean).length < 12) {\n        if (chance <= 0.4) {\n          numDices = 2;\n        } else {\n          numDices = 3;\n        }\n      // only room in 0\n      } else if (zeroArr.filter(Boolean).length < 6) {\n        numDices = 1\n      // only room in 1\n      } else if (oneArr.filter(Boolean).length < 9) {\n        numDices = 2\n      // only room in 2\n      } else if (twoArr.filter(Boolean).length < 12) {\n        numDices = 3\n      }\n\n      // determine which color dices to use\n      let useColors = [];\n      let usableColors = [];\n    \n      if (numDices === 3) {\n        useColors = ['red', 'yellow', 'purple'];\n      } else if (numDices === 2) {\n          colorNames.forEach(color => {\n          if (colors[color][1].filter(Boolean).length < 3) usableColors.push(color);\n        });\n        let randomUsableColors = this.shuffle(usableColors);\n        if (usableColors.length === 2 || usableColors.length === 3) {\n          useColors.push(randomUsableColors[0], randomUsableColors[1])\n        } else /* length = 1 */ {\n          useColors.push(randomUsableColors[0])\n          if (usableColors[0] === 'red') {\n            useColors.push('yellow');\n          } else if (usableColors[0] === 'yellow') {\n            useColors.push('red');\n          } else if (usableColors[0] === 'purple') {\n            useColors.push('red');\n          }\n        }\n      } else /* numDices === 1 */ {\n        colorNames.forEach(color => {\n          if (colors[color][0].filter(Boolean).length < 2) usableColors.push(color);\n        });\n        let randomUsableColors = this.shuffle(usableColors);\n        useColors.push(randomUsableColors[0])\n      }\n\n      setTimeout(() => {\n        // change dice colors\n        this.$refs.controlDices.checkedColors = useColors;      \n        this.$refs.controlDices.rollDices();    \n        // add score\n        this.addBotScore('own');             \n      }, 2000);\n    },\n    addBotScore(turn) {\n      let total = this.roundData.dices.total;\n      console.log(turn, total);\n      let colorsUsed = [];\n      ['red', 'yellow', 'purple'].forEach(color => {\n        if (this.roundData.dices[color] > 0) colorsUsed.push(color);\n      });\n      \n      // determine possible fields\n      let possibleFields = [];\n      let fieldScores = [\n        [[1], [5]], // 1\n        [[4], [9]], // 2\n        [[6], [10]], // 3\n        [[8], [11]], // 4\n        [[9], [12]], // 5\n        [[10], [13]], // 6\n        [[11], [14]], // 7 \n        [[12], [15]], // 8\n        [[14], [18]], // 9\n      ];\n      fieldScores.forEach((el, i) => {\n        if (total >= el[0] && total <= el[1]) possibleFields.push(i + 1);\n      });\n\n      // randomize colors + fields\n      let randomColors = this.shuffle(colorsUsed);\n      let randomFields = this.shuffle(possibleFields);\n\n      // create new array with colors and original gameData array positions\n      let originalArr = [];\n      randomColors.forEach(color => {\n        originalArr.push({ \n          color, \n          fields: this.originalPosition(randomFields, color) \n        })\n      });\n\n      let scoreData = [];\n      outerLoop:\n      for (let i = 0; i < originalArr.length; i++) {\n        for (let y = 0; y < originalArr[i].fields.length; y++) {\n          let scoreField = originalArr[i].fields[y];\n          let scoreColor = originalArr[i].color;\n          if (this.scoreCheck(scoreField, scoreColor) === true && \n          !this.gameData[this.roundData.activePlayer][scoreColor][scoreField]) {\n            scoreData.push(scoreColor, scoreField);\n            break outerLoop;\n          }\n        }\n      }\n\n      if (scoreData.length === 0 && turn === 'own') { // no compatible field/color found\n        if (this.roundData.remainingRolls > 0) {      \n          console.log('Roll again');    \n          setTimeout(() => {\n            // roll dices again\n            this.$refs.controlDices.rollDices();  \n            // add score\n            this.addBotScore('own'); \n          }, 2000);\n        } else {\n          // enter failed throw\n          setTimeout(() => {\n            this.$refs.card.$refs.failed.confirmFail(true);\n          }, 2000);\n        }\n      } else if (scoreData.length === 0 && turn === 'other') {\n        this.nextPlayer({ next: null }); // nextPlayer already has time-out in action\n      } else { // compatible field/color was found\n        this.pushScore(scoreData);\n      }\n\n    },\n    pushScore(data) {\n      let color = data[0];\n      let field = data[1];\n\n      setTimeout(() => {\n        this.setScore({ \n          color: color, \n          field: field \n        });\n        // Check if winning conditions are met\n        this.calcWinningConditions();\n        this.nextPlayer({ next: null });\n      }, 2000);\n    },\n    originalPosition(arr, color) {\n      // translate field back to position in original gameData array\n      let newArr = arr.map(field => {\n        if ((color === 'red' && field <= 3) || (color === 'yellow' && field >= 6)) {\n          return field = field + 1;\n        } else if (color === 'red' && field >= 4) {\n          return field = field + 2; \n        } else if (color === 'purple' && field <= 4) {\n          return field = field - 1;\n        } else {\n          return field\n        }\n      })\n      \n      return newArr;\n    },\n    shuffle(arr) {\n      let ctr = arr.length;\n      let temp, index;\n\n      // While there are elements in the array\n      while (ctr > 0) {\n        // Pick a random index\n        index = Math.floor(Math.random() * ctr);\n        // Decrease ctr by 1\n        ctr--;\n        // And swap the last element with it\n        temp = arr[ctr];\n        arr[ctr] = arr[index];\n        arr[index] = temp;\n      }\n      return arr;\n    }\n  },\n  watch: {\n    gameOver() {\n      this.gameData.forEach((_, player) => {\n        // Create new array for storing totals row\n        let total = [];\n        // For every color: if array has 9 elements, take last value as score; else take the number of elements as score\n        let colorArray = ['red', 'yellow', 'purple'];\n        colorArray.forEach(color => {\n          let newArray = this.gameData[player][color].filter(n => n);\n          if (newArray.length === 9) {\n            total.push(newArray[8]);\n          } else {\n            total.push(newArray.length);\n          }\n        });\n        total.push(\n          this.calcBonus(player, 3, 'red', 'yellow', 'purple'),\n          this.calcBonus(player, 7, 'red', 'yellow', 'purple'),\n          this.calcBonus(player, 8, 'yellow', 'red', 'purple'),\n          this.calcBonus(player, 2, 'purple', 'red', 'yellow'),\n          this.calcBonus(player, 9, 'purple', 'red', 'yellow')\n        );\n        // -5 points for every failed round\n        let failPoints = 0;\n        this.gameData[player].fail.forEach(element => {\n          failPoints += element;\n        });\n        total.push(failPoints);\n        // Add up everything and store it as the last element of total array\n        total.push(total.reduce((a, b) => a + b, 0));\n        this.setTotalScore({ player: player, total: total });\n      });\n      this.calcScores();\n    },\n    botOwnTurn(newVal) {\n      if (newVal) {\n        this.simulateTurn();\n      }\n    },\n    botOthersTurn(newVal, oldVal) {\n      if (newVal && !oldVal) {\n        this.addBotScore('other');\n      }\n    }\n  },\n  created() {\n    // get localStorage items if there are any\n    let lang = localStorage.getItem('lang');\n    if (lang) this.$i18n.locale = lang;\n\n    let name = localStorage.getItem('name');\n    if (name) this.$store.dispatch('storeName', name);\n\n    this.socket.on('connect', () => {\n      console.log('Connected!', this.socket.id);\n    });\n\n    this.socket.on('roomData', ({ users, started, user }) => {\n      if (this.gameOver) return;\n      if (users.length < 2 && started) {\n        this.error = this.$t('game.not-enough');\n      } else if (started) {\n        this.userLeft = this.gameData[user].name;\n        this.error = `${this.userLeft} ${this.$t('game.left')}...`;\n        if (user === this.roundData.activePlayer) {\n          if (this.roundData.scoreAdded.length === 0) {\n            // determine next player\n            const next = this.roundData.activePlayer === this.gameData.length - 1 ? 0 : this.roundData.activePlayer;\n            this.$store.commit('nextPlayer', { next: next });\n            this.$store.dispatch('resetRoundData');\n          } else {\n            this.nextPlayer({ instant: true, playerLeft: true });\n          }\n        }\n        // remove from gameData\n        setTimeout(() => {\n          this.removePlayer(user);\n          // set new id\n          let id = this.gameData.findIndex(el => el.name === this.myName);\n          this.setId({ id });\n        }, 1000);\n      }\n    });\n\n    this.socket.on('roundData', (data) => {\n      this.setRoundData(data);\n    });\n\n    this.socket.on('gameData', (data) => {\n      this.setGameData({ gameData: data });\n    });\n\n    this.socket.on('gameOver', () => {\n      this.setGameOver();\n    });\n  }\n};\n</script>\n\n<style>\n#app {\n  box-sizing: border-box;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\na, button, div, span, i, input {\n-webkit-tap-highlight-color: transparent;\n-webkit-touch-callout: none;\n-webkit-user-select: none;\n-khtml-user-select: none;\n-moz-user-select: none;\n-ms-user-select: none;\nuser-select: none;\n}\n\nbody {\n  background: #181b20;\n  color: #2d3748;\n}\n\n.full-width {\n\tleft: 50%;\n\tmargin-left: -50vw;\n\tmargin-right: -50vw;\n\tmax-width: 100vw;\n\tposition: relative;\n\tright: 50%;\n\twidth: 100vw;\n}\n</style>\n"],"sourceRoot":""}]}