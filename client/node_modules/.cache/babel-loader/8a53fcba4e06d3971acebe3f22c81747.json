{"remainingRequest":"/Users/joey/Projects/qwinto/client/node_modules/babel-loader/lib/index.js!/Users/joey/Projects/qwinto/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/joey/Projects/qwinto/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/joey/Projects/qwinto/client/src/components/GameLobby.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/joey/Projects/qwinto/client/src/components/GameLobby.vue","mtime":1668154010656},{"path":"/Users/joey/Projects/qwinto/client/node_modules/cache-loader/dist/cjs.js","mtime":1668178923236},{"path":"/Users/joey/Projects/qwinto/client/node_modules/babel-loader/lib/index.js","mtime":1668178923523},{"path":"/Users/joey/Projects/qwinto/client/node_modules/cache-loader/dist/cjs.js","mtime":1668178923236},{"path":"/Users/joey/Projects/qwinto/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1668178926998}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvam9leS9Qcm9qZWN0cy9xd2ludG8vY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsndXNlcm5hbWUnXSwKICBlbWl0czogWydzdGFydC1nYW1lJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJzOiBbXSwKICAgICAgdGltZTogbnVsbCwKICAgICAgdGltZXI6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnc2V0SWQnLCAnc2V0TmFtZSddKSksCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ3NvY2tldCddKSksIHt9LCB7CiAgICBudW1QbGF5ZXJzOiBmdW5jdGlvbiBudW1QbGF5ZXJzKCkgewogICAgICByZXR1cm4gdGhpcy51c2Vycy5sZW5ndGg7CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIG51bVBsYXllcnM6IGZ1bmN0aW9uIG51bVBsYXllcnMoXywgb2xkVmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm51bVBsYXllcnMgPT09IDIgJiYgb2xkVmFsdWUgPT09IDEpIHsKICAgICAgICB0aGlzLnRpbWUgPSAzMDsKICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCd0aW1lJywgdGhpcy50aW1lKTsKICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMudGltZS0tOwoKICAgICAgICAgIGlmIChfdGhpcy50aW1lID09PSAwKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwoKICAgICAgICAgICAgX3RoaXMuc29ja2V0LmVtaXQoJ3N0YXJ0R2FtZScpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwMDApOwogICAgICB9IGVsc2UgaWYgKHRoaXMubnVtUGxheWVycyA8IDIpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgIHRoaXMudGltZSA9IG51bGw7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5udW1QbGF5ZXJzID4gMiAmJiB0aGlzLnRpbWUpIHsKICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCd0aW1lJywgdGhpcy50aW1lKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHRoaXMuc29ja2V0Lm9uKCdzdGFydEdhbWUnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpZCA9IF90aGlzMi51c2Vycy5pbmRleE9mKF90aGlzMi51c2VybmFtZSk7CgogICAgICBfdGhpczIuc2V0SWQoewogICAgICAgIGlkOiBpZAogICAgICB9KTsKCiAgICAgIF90aGlzMi5zZXROYW1lKF90aGlzMi51c2VybmFtZSk7CgogICAgICBfdGhpczIuJGVtaXQoJ3N0YXJ0LWdhbWUnLCBfdGhpczIudXNlcnMpOwogICAgfSk7CiAgICB0aGlzLnNvY2tldC5vbigncm9vbURhdGEnLCBmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgdXNlcnMgPSBfcmVmLnVzZXJzOwogICAgICBfdGhpczIudXNlcnMgPSB1c2VyczsKICAgIH0pOwogICAgdGhpcy5zb2NrZXQub24oJ3RpbWUnLCBmdW5jdGlvbiAodGltZSkgewogICAgICBpZiAoIV90aGlzMi50aW1lKSB7CiAgICAgICAgX3RoaXMyLnRpbWUgPSB0aW1lOwogICAgICAgIF90aGlzMi50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi50aW1lLS07CgogICAgICAgICAgaWYgKF90aGlzMi50aW1lID09PSAwKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMyLnRpbWVyKTsKCiAgICAgICAgICAgIF90aGlzMi5zb2NrZXQuZW1pdCgnc3RhcnRHYW1lJyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0KICAgIH0pOwoKICAgIGlmICh0aGlzLnVzZXJuYW1lKSB7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ2pvaW4nLCB7CiAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/joey/Projects/qwinto/client/src/components/GameLobby.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <teleport to=\"#app\">\n    <div class=\"mt-5\">\n      <p class=\"loading text-center text-3xl text-white\">\n        {{ $t('start.more-players') }}\n        <span>.</span>\n        <span>.</span>\n        <span>.</span>\n      </p>\n      <div v-if=\"time\" class=\"text-white text-center\">\n        <p class=\"text-m mt-1\">{{ $t('start.begins-in') }}:</p>\n        <p class=\"loading text-xl\">{{ time }}</p>\n      </div>\n      <p v-if=\"!time\" class=\"loading text-center text-xs text-white\">{{ $t('start.begins-when') }}</p>\n      <div class=\"mx-auto mt-4 items-center max-w-xs p-3 text-center bg-gray-300 rounded\">\n        <ul>\n          <li v-for=\"(user, i) in users\" :key=\"user\" :class=\"{ 'text-orange-600 font-bold': user === username }\">\n            {{ i + 1 }}. {{ user }}\n          </li>\n        </ul>\n      </div>\n      <div class=\"mx-auto tems-center max-w-xs p-3 text-center\">\n        <a href=\"/\">\n        <base-icon\n          type=\"fa-gradient-red\"\n          icon=\"fa-backward\"\n        ></base-icon>\n        </a>\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex';\n\nexport default {\n  props: ['username'],\n  emits: ['start-game'],\n  data() {\n    return {\n      users: [],\n      time: null,\n      timer: null,\n    };\n  },\n  methods: {\n    ...mapActions(['setId', 'setName']),\n  },\n  computed: {\n    ...mapGetters(['socket']),\n    numPlayers() {\n      return this.users.length;\n    },\n  },\n  watch: {\n    numPlayers(_, oldValue) {\n      if (this.numPlayers === 2 && oldValue === 1) {\n        this.time = 30;\n        this.socket.emit('time', this.time);\n        this.timer = setInterval(() => {\n          this.time--;\n          if (this.time === 0) {\n            clearInterval(this.timer);\n            this.socket.emit('startGame');\n          }\n        }, 1000);\n      } else if (this.numPlayers < 2) {\n        clearInterval(this.timer);\n        this.time = null;\n      } else if (this.numPlayers > 2 && this.time) {\n        this.socket.emit('time', this.time);\n      }\n    },\n  },\n  created() {\n    this.socket.on('startGame', () => {\n      let id = this.users.indexOf(this.username);\n      this.setId({ id });\n      this.setName(this.username);\n      this.$emit('start-game', this.users);\n    });\n\n    this.socket.on('roomData', ({ users }) => {\n      this.users = users;\n    });\n\n    this.socket.on('time', time => {\n      if (!this.time) {\n        this.time = time;\n        this.timer = setInterval(() => {\n          this.time--;\n          if (this.time === 0) {\n            clearInterval(this.timer);\n            this.socket.emit('startGame');\n          }\n        }, 1000);\n      }\n    });\n\n    if (this.username) {\n      this.socket.emit('join', { username: this.username });\n    }\n  },\n};\n</script>\n\n<style>\n@keyframes blink {\n  0% {\n    opacity: 0.2;\n  }\n  20% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0.2;\n  }\n}\n\n.loading span {\n  animation-name: blink;\n  animation-duration: 1.4s;\n  animation-iteration-count: infinite;\n  animation-fill-mode: both;\n}\n\n.loading span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.loading span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n</style>\n"],"sourceRoot":""}]}